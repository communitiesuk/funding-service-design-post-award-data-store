{% extends "common/base.html" %}

{% from "govuk_frontend_jinja/components/back-link/macro.html" import govukBackLink %}
{%- from "govuk_frontend_jinja/components/button/macro.html" import govukLink -%}
{%- from "govuk_frontend_jinja/components/summary-list/macro.html" import govukSummaryList %}
{% from "govuk_frontend_jinja/components/tag/macro.html" import govukTag %}

{% block beforeContent %}
  {{ super() }}
  {{ govukBackLink({"href": back_link}) }}
{% endblock %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <span class="govuk-caption-xl">{{ programme.organisation.organisation_name }} - {{ programme.fund.fund_name }}</span>
      <h1 class="govuk-heading-xl">Report for April 2024 to June 2024</h1>

      <h2 class="govuk-heading-m">Programme report</h2>
      <ul class="govuk-task-list">
        <li class="govuk-task-list__item govuk-task-list__item--with-link">
          <div class="govuk-task-list__name-and-hint">
            <a class="govuk-link govuk-task-list__link govuk-link--no-visited-state" href="#">
              {{ programme_data.name }}
            </a>
          </div>

          <div class="govuk-task-list__status">
            {% set status = programme_data.status.value %}
            {% if status == "Not started" %}
              {{ govukTag({"text": status, "classes": "govuk-tag--grey"}) }}
            {% elif status == "In progress" %}
              {{ govukTag({"text": status, "classes": "govuk-tag--blue"}) }}
            {% elif status == "Complete" %}
              {{ govukTag({"text": status, "classes": "govuk-tag--green"}) }}
            {% endif %}
        </div>
        </li>
      </ul>

      <h2 class="govuk-heading-m">Project reports</h2>
      <ul class="govuk-task-list">
      {% for project in project_data %}
          <li class="govuk-task-list__item govuk-task-list__item--with-link">
            <div class="govuk-task-list__name-and-hint">
              <a class="govuk-link govuk-task-list__link govuk-link--no-visited-state"
                 href="{{ url_for('report.project_reporting_home', fund_slug=programme.fund.slug, org_slug=programme.organisation.slug, reporting_round_number=reporting_round_number, project_slug=project.slug) }}">
                {{ project.name }}
              </a>
            </div>

            <div class="govuk-task-list__status">
              {% set status = project.status.value %}
              {% if status == "Not started" %}
                {{ govukTag({"text": status, "classes": "govuk-tag--grey"}) }}
              {% elif status == "In progress" %}
                {{ govukTag({"text": status, "classes": "govuk-tag--blue"}) }}
              {% elif status == "Complete" %}
                {{ govukTag({"text": status, "classes": "govuk-tag--green"}) }}
              {% endif %}
          </div>
          </li>
      {% endfor %}
      </ul>
    </div>
  </div>
  <form method="post" novalidate>
    <button class="govuk-button">Submit</button>
  </form>
{% endblock content %}
