{% extends "common/base.html" %}

{%- from 'govuk_frontend_jinja/components/button/macro.html' import govukLink -%}
{%- from 'govuk_frontend_jinja/components/summary-list/macro.html' import govukSummaryList %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <h1 class="govuk-heading-xl">Funding programmes</h1>

      {% for organisation in organisations %}
        {% set summaryData = {
            'card': {
              'title': {'text': organisation.organisation_name, 'classes': 'govuk-!-font-size-24'},
            },
            'rows': []
          }
        %}
        {% for programme in programmes_by_organisation[organisation.id] %}
          {% set _ = summaryData.rows.append({
              'key': {
                'text': programme.programme_name
              },
              'value': {
                'text': "Next report due 31 July 2024"
              },
              'actions': {
                'items': [
                  {
                    'href': url_for('report.programme_dashboard', programme_id=programme.id),
                    'text': "View details",
                    'visuallyHiddenText': "contact",
                  }
                ]
              }
            })
            %}
        {% endfor %}
        {{ govukSummaryList(summaryData) }}
      {% endfor %}
    </div>
  </div>
{% endblock content %}
