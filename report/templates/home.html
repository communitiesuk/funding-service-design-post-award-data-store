{% extends "common/base.html" %}

{%- from "govuk_frontend_jinja/components/button/macro.html" import govukLink -%}
{%- from "govuk_frontend_jinja/components/summary-list/macro.html" import govukSummaryList %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <h1 class="govuk-heading-xl">Your programmes</h1>
        {% for programme in programmes %}
          {% set summaryData = {
              "card": {
                "title": {"text": programme.fund.fund_name, "classes": "govuk-!-font-size-24"},
              },
              "rows": []
            }
          %}
          {% set _ = summaryData.rows.append({
              "key": {
                "text": programme.organisation.organisation_name,
              },
              "value": {
                "text": "Next report due " + next_report_due(programme).strftime("%-d %B %Y")
              },
              "actions": {
                "items": [
                  {
                    "href": url_for("report.programme_home", fund_slug=programme.fund.slug, org_slug=programme.organisation.slug),
                    "text": "View details",
                    "visuallyHiddenText": "contact",
                  }
                ]
              }
            })
            %}
            {{ govukSummaryList(summaryData) }}
        {% endfor %}
    </div>
  </div>
{% endblock content %}
